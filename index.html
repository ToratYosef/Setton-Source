<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setton Source | Instant Quote</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300..800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    :root {
      color-scheme: dark;
      --accent-cyan: #47e8ff;
      --accent-magenta: #ff72d4;
      --accent-amber: #f9c74f;
      --slate-950: #020617;
      --slate-900: #030b1f;
    }
    /* --- CRITICAL RESET FOR STICKY FOOTER --- */
    html {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: "Manrope", system-ui, sans-serif;
      background:
        radial-gradient(circle at 8% 12%, rgba(71, 232, 255, 0.16), transparent 55%),
        radial-gradient(circle at 85% 20%, rgba(255, 114, 212, 0.18), transparent 60%),
        radial-gradient(circle at 12% 78%, rgba(249, 199, 79, 0.12), transparent 65%),
        linear-gradient(135deg, #020617, #050215 45%, #08091f 85%);
      color: #f8fafc;
      
      /* --- STICKY FOOTER FIX: 1/ Body as Flex Column container --- */
      display: flex;
      flex-direction: column;
      min-height: 100vh; /* Stretches body to full viewport height */
      margin: 0; /* Ensures no default body margin causes vertical scrolling */
      padding: 0; /* Ensures no default body padding causes vertical scrolling */
      /* --- END STICKY FOOTER FIX --- */

      position: relative;
      overflow-x: hidden;
    }
    main {
      /* --- STICKY FOOTER FIX: 2/ Main content grows to fill space --- */
      flex-grow: 1; 
      /* --- END STICKY FOOTER FIX --- */
    }
    a { color: inherit; }
    .noise-overlay {
      pointer-events: none;
      position: fixed;
      inset: 0;
      background-image: url('https://grainy-gradients.vercel.app/noise.svg');
      opacity: 0.05;
      mix-blend-mode: screen;
    }
    .glass-card {
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.78), rgba(15, 23, 42, 0.52));
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 28px 60px rgba(2, 6, 23, 0.55);
      position: relative;
      overflow: hidden;
    }
    .glass-surface {
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background: rgba(15, 23, 42, 0.58);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }
    .glass-veil {
      position: absolute;
      inset: -80% -50% -40% -60%;
      background:
        radial-gradient(circle at 20% 30%, rgba(71, 232, 255, 0.35), rgba(71, 232, 255, 0)),
        radial-gradient(circle at 70% 20%, rgba(255, 114, 212, 0.28), rgba(255, 114, 212, 0)),
        radial-gradient(circle at 60% 85%, rgba(249, 199, 79, 0.25), rgba(249, 199, 79, 0));
      opacity: 0.45;
      pointer-events: none;
      filter: blur(70px);
    }
    .aurora, .aurora-second {
      position: absolute;
      border-radius: 999px;
      filter: blur(90px);
      opacity: 0.45;
      pointer-events: none;
    }
    .aurora {
      inset: -25% auto auto -25%;
      width: 60vw;
      height: 60vh;
      background: radial-gradient(circle, rgba(71, 232, 255, 0.4) 0%, rgba(71, 232, 255, 0) 70%);
    }
    .aurora-second {
      inset: auto -20% -30% 40%;
      width: 45vw;
      height: 55vh;
      background: radial-gradient(circle, rgba(255, 114, 212, 0.35) 0%, rgba(255, 114, 212, 0) 75%);
    }
    .layout-cluster {
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.7), rgba(15, 23, 42, 0.48));
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05), 0 22px 45px rgba(1, 5, 20, 0.4);
    }
    .iframe-shell {
      position: relative;
      border-radius: 28px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.4));
      box-shadow: 0 25px 60px rgba(2, 8, 23, 0.6);
    }
    .iframe-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(71, 232, 255, 0.35), transparent 60%),
                  radial-gradient(circle at bottom right, rgba(255, 114, 212, 0.25), transparent 70%);
      opacity: 0.7;
      pointer-events: none;
    }
    .iframe-ratio {
      position: relative;
      width: 100%;
      padding-top: 62%;
    }
    .iframe-ratio iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
      border-radius: 24px;
      background: #020617;
    }
    .tagline {
      letter-spacing: 0.35em;
      text-transform: uppercase;
    }
    .btn-primary {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.85rem 1.6rem;
      border-radius: 9999px;
      font-weight: 600;
      background: linear-gradient(120deg, rgba(71, 232, 255, 0.92), rgba(255, 114, 212, 0.92));
      color: #020617;
      box-shadow: 0 18px 35px rgba(71, 232, 255, 0.25);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 45px rgba(255, 114, 212, 0.32);
    }
    .btn-secondary {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.85rem 1.4rem;
      border-radius: 9999px;
      font-weight: 600;
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: rgba(203, 213, 225, 0.9);
      transition: border-color 0.25s ease, color 0.25s ease;
    }
    .btn-secondary:hover {
      color: #fff;
      border-color: rgba(71, 232, 255, 0.55);
    }
    .btn-ghost {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.2rem;
      border-radius: 9999px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      color: rgba(203, 213, 225, 0.85);
      font-weight: 600;
      transition: border-color 0.25s ease, color 0.25s ease;
    }
    .btn-ghost:hover {
      color: #f8fafc;
      border-color: rgba(71, 232, 255, 0.55);
    }
    .focus-ring:focus-visible {
      outline: 2px solid rgba(71, 232, 255, 0.6);
      outline-offset: 2px;
    }
    .gradient-divider {
      width: 140px;
      height: 2px;
      background: linear-gradient(90deg, rgba(71, 232, 255, 0), rgba(71, 232, 255, 0.8), rgba(255, 114, 212, 0));
      margin: 0 auto;
    }
    .modal {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background: rgba(2, 6, 23, 0.82);
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.28s ease;
      z-index: 60;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-panel {
      width: 100%;
      /* Adjusted max-width for a smaller, better fit */
      max-width: min(800px, 95vw); 
      transform: translateY(32px);
      transition: transform 0.3s ease;
    }
    .modal.active .modal-panel {
      transform: translateY(0);
    }
    body.modal-open {
      overflow: hidden;
    }
    [data-step-panel] {
      display: none;
    }
    [data-step-panel].active {
      display: block;
    }
    .stepper {
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    .step-dot {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(71, 232, 255, 0.12);
      border: 1px solid rgba(148, 163, 184, 0.25);
      font-weight: 600;
      transition: all 0.25s ease;
    }
    .step-dot.active {
      background: linear-gradient(135deg, rgba(71, 232, 255, 0.85), rgba(255, 114, 212, 0.85));
      color: #020617;
      border-color: transparent;
      box-shadow: 0 0 25px rgba(71, 232, 255, 0.35);
    }
    .step-line {
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, rgba(71, 232, 255, 0.05), rgba(71, 232, 255, 0.6));
      opacity: 0.6;
    }
    .modal-grid {
      display: grid;
      gap: 2rem;
      grid-template-columns: minmax(0, 1fr) minmax(0, 320px);
    }
    .estimate-summary {
      position: sticky;
      top: 1.5rem;
    }
    @media (max-width: 1024px) {
      header .flex {
        flex-direction: column;
        text-align: center;
      }
      header .flex > div:last-child {
        max-width: 100%;
      }
      header .flex .flex-wrap {
        justify-content: center;
      }
    }
    @media (max-width: 900px) {
      .modal-grid {
        grid-template-columns: 1fr;
      }
      .estimate-summary {
        position: static;
      }
    }
    @media (max-width: 768px) {
      body {
        background:
          radial-gradient(circle at top, rgba(71, 232, 255, 0.28), transparent 55%),
          radial-gradient(circle at bottom, rgba(255, 114, 212, 0.24), transparent 60%),
          #030617;
      }
      .glass-card {
        border-radius: 26px;
      }
      .modal {
        padding: 1rem;
      }
    }
  </style>
</head>
<body class="relative">
  <div class="noise-overlay"></div>
  <div class="aurora"></div>
  <div class="aurora-second"></div>

  <header class="relative z-10 overflow-hidden">
    <div class="glass-veil"></div>
    <div class="max-w-6xl mx-auto px-6 pt-16 pb-12">
      <div class="grid gap-12 lg:grid-cols-[1.1fr,0.9fr] items-center">
        <div class="space-y-8">
          <div class="flex items-center space-x-3 text-2xl font-bold text-slate-50">
            <!-- Setton Source Logo Placeholder (3D Box) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-cyan-400">
                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                <path d="M2 17l10 5 10-5" />
                <path d="M2 12l10 5 10-5" />
            </svg>
            <span>Setton Source</span>
          </div>
          <span class="tagline inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface text-xs tracking-[0.35em] text-cyan-100/80">
            <i data-lucide="scan-search" class="w-4 h-4"></i>
            Instant project intelligence
          </span>
          <h1 class="font-[700] text-4xl md:text-5xl lg:text-6xl leading-tight text-slate-50">
            Build unforgettable digital experiences with precision-crafted delivery.
          </h1>
          <p class="text-lg md:text-xl text-slate-300/90 max-w-2xl">
            From conversion-obsessed marketing sites to resilient product platforms, Setton Source blends engineering rigor with cinematic design. Answer a few guided prompts to generate a launch-ready roadmap.
          </p>
          <div class="flex flex-wrap gap-4">
            <button type="button" class="btn-primary focus-ring" data-open-quote>
              Get instant quote
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </button>
            <a href="#work" class="btn-secondary">
              See recent builds
              <i data-lucide="sparkle" class="w-4 h-4"></i>
            </a>
          </div>
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm text-slate-300/85">
            <div class="glass-surface rounded-2xl p-4">
              <p class="text-xs uppercase tracking-[0.3em] text-cyan-100/60">Avg response</p>
              <p class="text-lg font-semibold text-slate-50">&lt; 12 hrs</p>
            </div>
            <div class="glass-surface rounded-2xl p-4">
              <p class="text-xs uppercase tracking-[0.3em] text-cyan-100/60">Launch window</p>
              <p class="text-lg font-semibold text-slate-50">4 – 6 wks</p>
            </div>
            <div class="glass-surface rounded-2xl p-4">
              <p class="text-xs uppercase tracking-[0.3em] text-cyan-100/60">Retention lift</p>
              <p class="text-lg font-semibold text-slate-50">+28%</p>
            </div>
            <div class="glass-surface rounded-2xl p-4">
              <p class="text-xs uppercase tracking-[0.3em] text-cyan-100/60">Launch partners</p>
              <p class="text-lg font-semibold text-slate-50">42 startups</p>
            </div>
          </div>
        </div>
        <div class="glass-card rounded-3xl p-8 space-y-6 text-slate-200">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface text-xs uppercase tracking-[0.28em] text-cyan-200/80">
            <i data-lucide="radar" class="w-4 h-4"></i>
            Why teams choose us
          </div>
          <h2 class="text-2xl font-semibold text-slate-50">Obsessed with results, not deliverables.</h2>
          <ul class="space-y-4 text-sm text-slate-300/80">
            <li class="flex gap-3">
              <span class="w-11 h-11 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="sparkles" class="w-5 h-5 text-cyan-300"></i>
              </span>
              Cinematic hero systems, dynamic art direction, and motion-driven storytelling tuned to your brand voice.
            </li>
            <li class="flex gap-3">
              <span class="w-11 h-11 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="cpu" class="w-5 h-5 text-purple-300"></i>
              </span>
              Firebase, Next.js, automations, and analytics baked in from day zero for measurable outcomes.
            </li>
            <li class="flex gap-3">
              <span class="w-11 h-11 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="bot" class="w-5 h-5 text-emerald-300"></i>
              </span>
              Conversion-first flows, CRO sprints, and lifecycle strategy to keep momentum after launch.
            </li>
          </ul>
          <div class="glass-surface rounded-2xl p-4 text-sm text-slate-300/80">
            <p class="uppercase tracking-[0.3em] text-xs text-cyan-100/60 mb-2">Quick note</p>
            <p>Share your wishlist via the quote flow and we’ll send a curated scope with pricing, timeline, and opportunities to delight.</p>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="relative z-10 pb-24 space-y-20">
    <section class="px-6 sm:px-8 lg:px-16">
      <div class="max-w-6xl mx-auto text-center space-y-6">
        <span class="inline-flex items-center justify-center gap-2 px-6 py-2 rounded-full glass-surface text-xs uppercase tracking-[0.35em] text-cyan-200/80">
          <i data-lucide="beaker" class="w-4 h-4"></i>
          Strategic capabilities
        </span>
        <h2 class="text-3xl md:text-4xl font-semibold text-slate-50">Services that scale from launch to lifecycle.</h2>
        <p class="text-base md:text-lg text-slate-300/90 max-w-3xl mx-auto">
          Every engagement is tuned to measurable outcomes—speed, conversion, retention, and brand lift.
        </p>
        <div class="gradient-divider"></div>
      </div>
      <div class="max-w-6xl mx-auto mt-12 grid gap-6 lg:gap-8 md:grid-cols-2 xl:grid-cols-3">
        <article class="layout-cluster rounded-3xl p-8 space-y-5 glass-card">
          <div class="inline-flex items-center gap-3 px-4 py-2 rounded-2xl glass-surface text-xs uppercase tracking-[0.3em] text-cyan-200/80">
            <i data-lucide="rocket" class="w-4 h-4"></i>
            Launch Kits
          </div>
          <h3 class="text-2xl font-semibold text-slate-50">Flagship marketing sites</h3>
          <p class="text-sm md:text-base text-slate-300/90">Narrative-driven pages with immersive visuals, motion, and optimized funnels for growth.</p>
          <ul class="space-y-3 text-sm text-slate-300/80">
            <li class="flex gap-3"><i data-lucide="sparkles" class="w-4 h-4 text-cyan-300 mt-1"></i> Glassmorphism hero systems &amp; interactive component libraries.</li>
            <li class="flex gap-3"><i data-lucide="palette" class="w-4 h-4 text-purple-300 mt-1"></i> Identity-aligned visuals, content design, and analytics instrumentation.</li>
          </ul>
        </article>
        <article class="layout-cluster rounded-3xl p-8 space-y-5 glass-card">
          <div class="inline-flex items-center gap-3 px-4 py-2 rounded-2xl glass-surface text-xs uppercase tracking-[0.3em] text-emerald-200/80">
            <i data-lucide="grid" class="w-4 h-4"></i>
            Product
          </div>
          <h3 class="text-2xl font-semibold text-slate-50">SaaS &amp; portal experiences</h3>
          <p class="text-sm md:text-base text-slate-300/90">Secure dashboards, internal tools, and membership platforms engineered for scale.</p>
          <ul class="space-y-3 text-sm text-slate-300/80">
            <li class="flex gap-3"><i data-lucide="shield" class="w-4 h-4 text-emerald-300 mt-1"></i> Authentication, role-based access, and data visualization.</li>
            <li class="flex gap-3"><i data-lucide="cloud" class="w-4 h-4 text-sky-300 mt-1"></i> Cloud functions, Firestore, and serverless APIs to connect operations.</li>
          </ul>
        </article>
        <article class="layout-cluster rounded-3xl p-8 space-y-5 glass-card md:col-span-2 xl:col-span-1">
          <div class="inline-flex items-center gap-3 px-4 py-2 rounded-2xl glass-surface text-xs uppercase tracking-[0.3em] text-amber-200/80">
            <i data-lucide="activity" class="w-4 h-4"></i>
            Optimization
          </div>
          <h3 class="text-2xl font-semibold text-slate-50">Growth &amp; lifecycle</h3>
          <p class="text-sm md:text-base text-slate-300/90">Ongoing experiments, performance tuning, and CRO to maintain momentum.</p>
          <ul class="space-y-3 text-sm text-slate-300/80">
            <li class="flex gap-3"><i data-lucide="zap" class="w-4 h-4 text-amber-300 mt-1"></i> Sub-second loading, accessibility, and SEO enhancements.</li>
            <li class="flex gap-3"><i data-lucide="bot" class="w-4 h-4 text-cyan-300 mt-1"></i> Automations, CRM integrations, and lifecycle campaigns.</li>
          </ul>
        </article>
      </div>
    </section>

    <section class="px-6 sm:px-8 lg:px-16">
      <div class="max-w-6xl mx-auto glass-card rounded-[38px] p-10 lg:p-14 space-y-10">
        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
          <div class="space-y-3">
            <span class="tagline inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface text-xs tracking-[0.3em] text-cyan-200/80">
              <i data-lucide="workflow" class="w-4 h-4"></i>
              Guided quoting
            </span>
            <h2 class="text-3xl font-semibold text-slate-50">Three steps to a living quote.</h2>
            <p class="text-base text-slate-300/85 max-w-2xl">Open the hero button to explore functionality, design, and delivery preferences. The modal keeps a running total so you can experiment before sending us context.</p>
          </div>
          <button type="button" class="btn-primary focus-ring" data-open-quote>Start the flow</button>
        </div>
        <div class="grid gap-6 lg:grid-cols-3 text-sm text-slate-300/85">
          <div class="glass-surface rounded-3xl p-6 space-y-3">
            <div class="inline-flex items-center justify-center w-12 h-12 rounded-2xl glass-card">
              <i data-lucide="sliders-horizontal" class="w-5 h-5 text-cyan-300"></i>
            </div>
            <h3 class="text-xl font-semibold text-slate-50">Step 1 · Functionality</h3>
            <p>Choose your experience type, scope, and back-end needs. Add optional features and see the estimate respond instantly.</p>
          </div>
          <div class="glass-surface rounded-3xl p-6 space-y-3">
            <div class="inline-flex items-center justify-center w-12 h-12 rounded-2xl glass-card">
              <i data-lucide="paintbrush" class="w-5 h-5 text-purple-300"></i>
            </div>
            <h3 class="text-xl font-semibold text-slate-50">Step 2 · Design DNA</h3>
            <p>Share the vibe you’re chasing, brand asset readiness, and domain status so we can plan creative direction out of the gate.</p>
          </div>
          <div class="glass-surface rounded-3xl p-6 space-y-3">
            <div class="inline-flex items-center justify-center w-12 h-12 rounded-2xl glass-card">
              <i data-lucide="messages-square" class="w-5 h-5 text-emerald-300"></i>
            </div>
            <h3 class="text-xl font-semibold text-slate-50">Step 3 · Contact &amp; context</h3>
            <p>Tell us who to collaborate with and drop comments, inspirations, or KPIs. We respond with a tailored scope in under 12 hours.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="work" class="px-6 sm:px-10">
      <div class="max-w-6xl mx-auto text-center space-y-6">
        <span class="inline-flex items-center justify-center gap-2 px-5 py-2 rounded-full glass-surface text-xs uppercase tracking-[0.35em] text-cyan-200/80">
          <i data-lucide="monitor-smartphone" class="w-4 h-4"></i>
          Selected builds
        </span>
        <h2 class="text-3xl md:text-4xl font-semibold text-slate-50">Immersive interfaces that turn visitors into fans.</h2>
        <p class="text-base md:text-lg text-slate-300/90 max-w-3xl mx-auto">Dive into a few recent experiences. Each project pairs tactile UI with measurable outcomes.</p>
      </div>
      <div class="max-w-6xl mx-auto mt-12 grid gap-10 lg:grid-cols-2">
        <article class="space-y-4">
          <div class="iframe-shell">
            <div class="iframe-ratio">
              <!-- Added scrolling="no" -->
              <iframe src="https://secondhandcell.com" loading="lazy" title="Second Hand Cell" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no"></iframe>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="text-left">
              <p class="text-sm uppercase tracking-[0.3em] text-cyan-200/80">Second Hand Cell</p>
              <h3 class="text-xl font-semibold text-slate-50">Mobile E-commerce Platform</h3>
            </div>
            <a href="https://secondhandcell.com" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-5 py-2 rounded-full glass-surface text-sm text-cyan-200 hover:text-cyan-100 transition">
              Visit Site
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
          </div>
        </article>
        <article class="space-y-4">
          <div class="iframe-shell">
            <div class="iframe-ratio">
              <!-- Added scrolling="no" -->
              <iframe src="https://ydeseniors.com" loading="lazy" title="YDE Seniors" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no"></iframe>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="text-left">
              <p class="text-sm uppercase tracking-[0.3em] text-cyan-200/80">YDE Seniors</p>
              <h3 class="text-xl font-semibold text-slate-50">Educational / School Portal</h3>
            </div>
            <a href="https://ydeseniors.com" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-5 py-2 rounded-full glass-surface text-sm text-cyan-200 hover:text-cyan-100 transition">
              Visit Site
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
          </div>
        </article>
        <article class="space-y-4">
          <div class="iframe-shell">
            <div class="iframe-ratio">
              <!-- Added scrolling="no" -->
              <iframe src="https://binyan-shalem.com" loading="lazy" title="Binyan Shalem" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no"></iframe>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="text-left">
              <p class="text-sm uppercase tracking-[0.3em] text-cyan-200/80">Binyan Shalem</p>
              <h3 class="text-xl font-semibold text-slate-50">Non-profit / Organizational Site</h3>
            </div>
            <a href="https://binyan-shalem.com" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-5 py-2 rounded-full glass-surface text-sm text-cyan-200 hover:text-cyan-100 transition">
              Visit Site
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
          </div>
        </article>
        <article class="space-y-4">
          <div class="iframe-shell">
            <div class="iframe-ratio">
              <!-- Added scrolling="no" -->
              <iframe src="https://toratyosefsummerraffle.com" loading="lazy" title="Torat Yosef Raffle" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no"></iframe>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="text-left">
              <p class="text-sm uppercase tracking-[0.3em] text-cyan-200/80">Torat Yosef Raffle</p>
              <h3 class="text-xl font-semibold text-slate-50">Fundraising / Raffle Site</h3>
            </div>
            <a href="https://toratyosefsummerraffle.com" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-5 py-2 rounded-full glass-surface text-sm text-cyan-200 hover:text-cyan-100 transition">
              Visit Site
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer class="relative z-10 border-t border-white/5">
    <div class="max-w-6xl mx-auto px-6 py-12 grid gap-8 md:grid-cols-[1.2fr,0.8fr]">
      <div class="space-y-4">
        <!-- Replaced simple text with logo/name block -->
        <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-cyan-400">
                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                <path d="M2 17l10 5 10-5" />
                <path d="M2 12l10 5 10-5" />
            </svg>
            <p class="text-lg font-bold text-slate-50">Setton Source</p>
        </div>
        <h3 class="text-2xl font-semibold text-slate-50">Crafting resilient digital experiences with heart, clarity, and measurable lift.</h3>
        <div class="flex flex-wrap gap-3 text-sm text-slate-400">
          <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface">
            <i data-lucide="map-pin" class="w-4 h-4"></i>
            NYC · Remote friendly
          </span>
          <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface">
            <i data-lucide="clock" class="w-4 h-4"></i>
            Replies in under 12 hours
          </span>
        </div>
      </div>
      <div class="space-y-4 text-sm text-slate-400">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-slate-500">Contact</p>
          <a href="mailto:hello@settonsource.com" class="block text-lg text-slate-100 hover:text-cyan-200 transition">hello@settonsource.com</a>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <a href="#" class="glass-surface rounded-2xl px-4 py-3 flex items-center gap-2 hover:text-cyan-200 transition"><i data-lucide="instagram" class="w-4 h-4"></i> Instagram</a>
          <a href="#" class="glass-surface rounded-2xl px-4 py-3 flex items-center gap-2 hover:text-cyan-200 transition"><i data-lucide="linkedin" class="w-4 h-4"></i> LinkedIn</a>
          <a href="#" class="glass-surface rounded-2xl px-4 py-3 flex items-center gap-2 hover:text-cyan-200 transition"><i data-lucide="dribbble" class="w-4 h-4"></i> Dribbble</a>
          <a href="#" class="glass-surface rounded-2xl px-4 py-3 flex items-center gap-2 hover:text-cyan-200 transition"><i data-lucide="youtube" class="w-4 h-4"></i> YouTube</a>
        </div>
        <p class="text-xs text-slate-500">© 2025 Setton Source. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <div id="quote-modal" class="modal hidden">
    <div class="modal-panel glass-card rounded-[36px] p-6 sm:p-8 lg:p-10">
      <div class="flex items-start justify-between gap-6 flex-wrap">
        <div>
          <!-- Added Logo and Name to Modal Header -->
          <div class="flex items-center space-x-3 mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-cyan-400">
                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                <path d="M2 17l10 5 10-5" />
                <path d="M2 12l10 5 10-5" />
            </svg>
            <p class="font-bold text-xl text-slate-50">Setton Source</p>
          </div>
          <p class="text-xs uppercase tracking-[0.3em] text-cyan-200/80">Instant quote flow</p>
          <h2 class="text-2xl font-semibold text-slate-50 mt-2">Map the build in three guided steps.</h2>
        </div>
        <button type="button" class="glass-surface rounded-full p-2 focus-ring" data-close-modal>
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
      </div>
      <div class="stepper mt-6">
        <div class="text-center">
          <div class="step-dot active" data-step-dot="1">1</div>
          <p class="text-xs mt-2 text-slate-400" data-step-label="1">Functionality</p>
        </div>
        <span class="step-line"></span>
        <div class="text-center">
          <div class="step-dot" data-step-dot="2">2</div>
          <p class="text-xs mt-2 text-slate-400" data-step-label="2">Design DNA</p>
        </div>
        <span class="step-line"></span>
        <div class="text-center">
          <div class="step-dot" data-step-dot="3">3</div>
          <p class="text-xs mt-2 text-slate-400" data-step-label="3">Contact &amp; Context</p>
        </div>
      </div>
      <form id="quote-form" class="mt-10">
        <div class="modal-grid">
          <div class="space-y-10">
            <div data-step-panel="1" class="space-y-8 active">
              <div class="space-y-4">
                <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Project Type</span>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                  <button type="button" data-project-type="landing" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                    <i data-lucide="sparkles" class="w-5 h-5 text-cyan-300 mb-3"></i>
                    <p class="font-semibold text-slate-100">Launch Page</p>
                    <p class="text-xs text-slate-400">Single page or microsite momentum.</p>
                  </button>
                  <button type="button" data-project-type="marketing" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                    <i data-lucide="layers" class="w-5 h-5 text-purple-300 mb-3"></i>
                    <p class="font-semibold text-slate-100">Marketing Site</p>
                    <p class="text-xs text-slate-400">Multi-page presence &amp; storytelling.</p>
                  </button>
                  <button type="button" data-project-type="ecommerce" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                    <i data-lucide="shopping-bag" class="w-5 h-5 text-emerald-300 mb-3"></i>
                    <p class="font-semibold text-slate-100">E-commerce</p>
                    <p class="text-xs text-slate-400">Storefronts, subscriptions, funnels.</p>
                  </button>
                  <button type="button" data-project-type="webapp" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                    <i data-lucide="blocks" class="w-5 h-5 text-amber-300 mb-3"></i>
                    <p class="font-semibold text-slate-100">Web App / Portal</p>
                    <p class="text-xs text-slate-400">Dashboards, portals, internal tools.</p>
                  </button>
                </div>
              </div>
              <div class="grid gap-5 sm:grid-cols-2">
                <label class="space-y-2 block text-sm">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Core Pages</span>
                  <input type="range" id="pages" min="1" max="12" step="1" value="3" class="w-full">
                  <div class="flex justify-between text-xs text-slate-400">
                    <span>1</span><span id="pages-output" class="text-cyan-300 text-sm font-semibold">3 pages</span><span>12</span>
                  </div>
                </label>
                <label class="space-y-2 block text-sm">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Backend &amp; Integrations</span>
                  <div class="grid grid-cols-2 gap-2 text-xs">
                    <button type="button" data-backend="no" class="backend-option glass-surface rounded-xl px-3 py-3 border border-transparent hover:border-cyan-400/60 transition focus-ring">No</button>
                    <button type="button" data-backend="yes" class="backend-option glass-surface rounded-xl px-3 py-3 border border-transparent hover:border-cyan-400/60 transition focus-ring">Yes</button>
                  </div>
                  <p class="text-xs text-slate-500">APIs, auth, dashboards, automations.</p>
                </label>
              </div>
              <fieldset class="space-y-3">
                <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Key Features</span>
                <div class="grid sm:grid-cols-2 gap-3 text-sm">
                  <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                    <input type="checkbox" id="feature-ecommerce" class="mt-1 accent-cyan-400" />
                    <div>
                      <p class="font-semibold text-slate-100">Payments / Storefront</p>
                      <p class="text-xs text-slate-400">Shop, donations, booking flow.</p>
                    </div>
                  </label>
                  <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                    <input type="checkbox" id="feature-admin" class="mt-1 accent-purple-400" />
                    <div>
                      <p class="font-semibold text-slate-100">Admin / CMS</p>
                      <p class="text-xs text-slate-400">Manageable content, data tools.</p>
                    </div>
                  </label>
                  <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                    <input type="checkbox" id="feature-support" class="mt-1 accent-emerald-400" />
                    <div>
                      <p class="font-semibold text-slate-100">Live Support</p>
                      <p class="text-xs text-slate-400">Chat, support desk, knowledge base.</p>
                    </div>
                  </label>
                  <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                    <input type="checkbox" id="feature-automation" class="mt-1 accent-amber-300" />
                    <div>
                      <p class="font-semibold text-slate-100">Automation</p>
                      <p class="text-xs text-slate-400">Workflows, CRM, analytics boosts.</p>
                    </div>
                  </label>
                </div>
              </fieldset>
            </div>

            <div data-step-panel="2" class="space-y-6">
              <div class="space-y-3">
                <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Visual Direction</span>
                <label class="glass-surface rounded-2xl p-4 flex items-center justify-between gap-4 text-sm border border-transparent hover:border-cyan-400/50 transition">
                  <div>
                    <p class="font-semibold text-slate-100">Design tone</p>
                    <p class="text-xs text-slate-400">Helps align art direction and typography.</p>
                  </div>
                  <select id="design-tone" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                    <option value="sleek">Sleek &amp; minimal</option>
                    <option value="vibrant">Vibrant &amp; playful</option>
                    <option value="editorial">Editorial &amp; premium</option>
                    <option value="experimental">Experimental &amp; bold</option>
                  </select>
                </label>
                <label class="glass-surface rounded-2xl p-4 flex items-center justify-between gap-4 text-sm border border-transparent hover:border-cyan-400/50 transition">
                  <div>
                    <p class="font-semibold text-slate-100">Interaction level</p>
                    <p class="text-xs text-slate-400">Choose how much motion &amp; polish you want.</p>
                  </div>
                  <select id="interaction-level" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                    <option value="balanced">Balanced</option>
                    <option value="minimal">Minimal motion</option>
                    <option value="immersive">High-immersion</option>
                  </select>
                </label>
              </div>
              <div class="space-y-4">
                <span class="uppercase tracking-[0.3em] text-xs text-slate-400 block">Brand &amp; Assets</span>
                <label class="glass-surface rounded-2xl p-4 flex items-center justify-between text-sm cursor-pointer border border-transparent hover:border-cyan-400/50 transition">
                  <div>
                    <p class="font-semibold text-slate-100">Logo ready to use?</p>
                    <p class="text-xs text-slate-400">If not, we include a rapid brand refresh (+$180).</p>
                  </div>
                  <select id="logo-status" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                    <option value="yes">Yes, ready</option>
                    <option value="no">Need help</option>
                  </select>
                </label>
                <label class="glass-surface rounded-2xl p-4 flex items-center justify-between text-sm cursor-pointer border border-transparent hover:border-cyan-400/50 transition">
                  <div>
                    <p class="font-semibold text-slate-100">Do you already own a URL?</p>
                    <p class="text-xs text-slate-400">If not, we secure domains + hosting setup.</p>
                  </div>
                  <select id="url-status" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                    <option value="live">I have one</option>
                    <option value="buy">Need to purchase</option>
                  </select>
                </label>
                <label class="glass-surface rounded-2xl p-4 flex flex-col gap-3 text-sm border border-transparent hover:border-cyan-400/50 transition">
                  <p class="font-semibold text-slate-100">Link to current site or inspiration (optional)</p>
                  <input type="url" id="project-url" placeholder="https://" class="glass-surface rounded-xl px-3 py-2 focus-ring placeholder:text-slate-500" />
                </label>
              </div>
            </div>

            <div data-step-panel="3" class="space-y-6">
              <div class="grid md:grid-cols-2 gap-6">
                <label class="space-y-2 text-sm">
                  <span class="uppercase tracking-[0.3em] text-slate-400">Your Name</span>
                  <input type="text" id="name" name="name" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="Jordan Founder" />
                </label>
                <label class="space-y-2 text-sm">
                  <span class="uppercase tracking-[0.3em] text-slate-400">Email</span>
                  <input type="email" id="email" name="email" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="you@brand.com" />
                </label>
                <label class="space-y-2 text-sm">
                  <span class="uppercase tracking-[0.3em] text-slate-400">Phone</span>
                  <input type="tel" id="phone" name="phone" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="(555) 123-4567" />
                </label>
                <label class="space-y-2 text-sm">
                  <span class="uppercase tracking-[0.3em] text-slate-400">Company / Brand</span>
                  <input type="text" id="project-name" name="project-name" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="NovaLabs" />
                </label>
              </div>
              <label class="space-y-2 text-sm block">
                <span class="uppercase tracking-[0.3em] text-slate-400">Timeline</span>
                <select id="timeline" class="glass-surface rounded-2xl px-4 py-3 focus-ring">
                  <option value="standard">Standard (6–8 weeks)</option>
                  <option value="accelerated">Accelerated (4–6 weeks)</option>
                  <option value="rapid">Rapid sprint (2–4 weeks)</option>
                </select>
              </label>
              <label class="space-y-2 text-sm block">
                <span class="uppercase tracking-[0.3em] text-slate-400">Project goals &amp; comments</span>
                <textarea id="project-description" rows="4" class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="Share the story, KPI, or inspiration we should know about..."></textarea>
              </label>
            </div>

            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4">
              <button type="button" id="prev-step" class="btn-ghost focus-ring">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                Previous
              </button>
              <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                <button type="button" id="next-step" class="btn-primary focus-ring justify-center">
                  Next step
                  <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
                <button type="submit" id="submit-button" class="btn-primary focus-ring justify-center hidden">
                  Submit quote
                  <i data-lucide="send" class="w-4 h-4"></i>
                </button>
              </div>
            </div>
          </div>

          <aside class="estimate-summary glass-surface rounded-3xl p-6 space-y-6 text-sm text-slate-300/85">
            <div>
              <p class="uppercase tracking-[0.3em] text-xs text-cyan-200/70">Live estimate</p>
              <h3 class="text-3xl font-semibold text-slate-50 mt-3" id="estimate-total">$0</h3>
              <p class="text-xs text-slate-400">Totals update as you adjust the scope.</p>
            </div>
            <div class="space-y-3 max-h-[320px] overflow-y-auto pr-1" id="estimate-breakdown"></div>
            <div class="glass-card rounded-2xl p-4 space-y-3">
              <div class="flex items-center gap-3">
                <span class="w-10 h-10 rounded-xl bg-cyan-400/20 flex items-center justify-center">
                  <i data-lucide="sparkles" class="w-5 h-5 text-cyan-200"></i>
                </span>
                <div>
                  <p class="font-semibold text-slate-100">Need something extra?</p>
                  <p class="text-xs text-slate-400">Add notes in Step 3—we’ll include it in the follow-up scope.</p>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </form>
    </div>
  </div>

  <div id="success-toast" class="fixed bottom-8 right-6 max-w-sm glass-card rounded-2xl p-5 shadow-2xl border border-emerald-400/40 text-emerald-200 hidden">
    <div class="flex items-start gap-3">
      <span class="w-10 h-10 rounded-xl bg-emerald-400/20 flex items-center justify-center">
        <i data-lucide="check" class="w-5 h-5"></i>
      </span>
      <div>
        <p class="font-semibold text-slate-50">Quote captured!</p>
        <p class="text-sm text-emerald-100/90">We just synced your request to our admin dashboard. Expect a personal reply shortly.</p>
      </div>
    </div>
  </div>

  <div id="error-toast" class="fixed bottom-8 right-6 max-w-sm glass-card rounded-2xl p-5 shadow-2xl border border-red-400/40 text-red-200 hidden">
    <div class="flex items-start gap-3">
      <span class="w-10 h-10 rounded-xl bg-red-400/20 flex items-center justify-center">
        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
      </span>
      <div>
        <p class="font-semibold text-slate-50">Something went wrong</p>
        <p class="text-sm text-red-100/90">Please try again or email hello@settonsource.com so we can assist manually.</p>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // --- Firebase Setup ---
    // NOTE: In a real environment, __firebase_config and related variables are provided by the canvas environment.
    // For standalone testing, this mock config is used.
    const firebaseConfig = {
      apiKey: "AIzaSyCcUMZmKwdOcUj4KszvTkPKlo-HmiVCXZU",
      authDomain: "setton-source-68177.firebaseapp.com",
      projectId: "setton-source-68177",
      storageBucket: "setton-source-68177.firebasestorage.app",
      messagingSenderId: "153708206059",
      appId: "1:153708206059:web:14cc935233eee4ecdb72bae",
      measurementId: "G-YW9WN4489T"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // --- Pricing Logic ---
    const pricingMatrix = {
      landing: { label: "Launch Page", base: 850, includedPages: 1, perPage: 150 },
      marketing: { label: "Marketing Site", base: 1600, includedPages: 3, perPage: 200 },
      ecommerce: { label: "E-commerce", base: 2500, includedPages: 4, perPage: 450 },
      webapp: { label: "Web App / Portal", base: 3200, includedPages: 4, perPage: 500 },
    };

    const timelinePricing = {
      standard: { label: "Standard", multiplier: 1 },
      accelerated: { label: "Accelerated", multiplier: 1.18 },
      rapid: { label: "Rapid Sprint", multiplier: 1.32 },
    };

    const backendCost = 950;
    const featurePricing = {
      "feature-ecommerce": { label: "Payments & commerce", cost: 600 },
      "feature-admin": { label: "Admin / CMS", cost: 500 },
      "feature-support": { label: "Live support suite", cost: 280 },
      "feature-automation": { label: "Automation & CRM", cost: 500 },
    };
    const logoRefreshCost = 50;
    const domainSetupCost = 50;


    // --- DOM Elements ---
    const projectTypeButtons = Array.from(document.querySelectorAll('.project-type-option'));
    const backendButtons = Array.from(document.querySelectorAll('.backend-option'));
    const pagesRange = document.getElementById('pages');
    const pagesOutput = document.getElementById('pages-output');
    const estimateTotal = document.getElementById('estimate-total');
    const estimateBreakdown = document.getElementById('estimate-breakdown');
    const form = document.getElementById('quote-form');
    const submitButton = document.getElementById('submit-button');
    const successToast = document.getElementById('success-toast');
    const errorToast = document.getElementById('error-toast');
    const openQuoteButtons = Array.from(document.querySelectorAll('[data-open-quote]'));
    const quoteModal = document.getElementById('quote-modal');
    const closeModalButtons = Array.from(document.querySelectorAll('[data-close-modal]'));
    const stepPanels = Array.from(document.querySelectorAll('[data-step-panel]'));
    const stepDots = Array.from(document.querySelectorAll('[data-step-dot]'));
    const stepLabels = Array.from(document.querySelectorAll('[data-step-label]'));
    const prevStepButton = document.getElementById('prev-step');
    const nextStepButton = document.getElementById('next-step');
    const body = document.body;

    let selectedProjectType = 'marketing';
    let backendRequirement = 'no';
    let currentStep = 1;

    // --- Utility Functions ---
    const formatCurrency = (value) => new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      maximumFractionDigits: 0,
    }).format(Math.round(value));

    function highlightSelection(collection, activeButton) {
      collection.forEach((button) => {
        const isActive = button === activeButton;
        button.classList.toggle('border-cyan-400/80', isActive);
        button.classList.toggle('bg-cyan-400/10', isActive);
        button.classList.toggle('shadow-[0_0_25px_rgba(71,232,255,0.35)]', isActive);
      });
    }

    // --- Event Listeners for Quote Calculation ---
    projectTypeButtons.forEach((button) => {
      button.addEventListener('click', () => {
        selectedProjectType = button.dataset.projectType;
        highlightSelection(projectTypeButtons, button);
        updateEstimate();
      });
    });

    backendButtons.forEach((button) => {
      button.addEventListener('click', () => {
        backendRequirement = button.dataset.backend;
        highlightSelection(backendButtons, button);
        updateEstimate();
      });
    });

    pagesRange.addEventListener('input', () => {
      pagesOutput.textContent = `${pagesRange.value} ${pagesRange.value === '1' ? 'page' : 'pages'}`;
      updateEstimate();
    });

    document.querySelectorAll('input[type="checkbox"], select').forEach((input) => {
      input.addEventListener('change', updateEstimate);
    });

    // --- Main Estimate Logic ---
    function updateEstimate() {
      const matrix = pricingMatrix[selectedProjectType];
      const pages = Number(pagesRange.value);
      const timeline = document.getElementById('timeline').value;
      const logoStatus = document.getElementById('logo-status').value;
      const urlStatus = document.getElementById('url-status').value;

      let total = matrix.base;
      const breakdownItems = [{ label: matrix.label, cost: matrix.base }];

      if (pages > matrix.includedPages) {
        const extraPages = pages - matrix.includedPages;
        const extraCost = extraPages * matrix.perPage;
        total += extraCost;
        breakdownItems.push({ label: `Additional pages (${extraPages})`, cost: extraCost });
      }

      if (backendRequirement === 'yes') {
        total += backendCost;
        breakdownItems.push({ label: 'Backend & integrations', cost: backendCost });
      }

      Object.entries(featurePricing).forEach(([id, details]) => {
        const checkbox = document.getElementById(id);
        if (checkbox.checked) {
          total += details.cost;
          breakdownItems.push({ label: details.label, cost: details.cost });
        }
      });

      // Logo Refresh Cost
      if (logoStatus === 'no') {
        total += logoRefreshCost;
        breakdownItems.push({ label: 'Rapid brand refresh', cost: logoRefreshCost });
      }

      // Domain Setup Cost
      if (urlStatus === 'buy') {
        total += domainSetupCost;
        breakdownItems.push({ label: 'Domain & hosting setup', cost: domainSetupCost });
      }

      // Timeline Multiplier
      const timelineDetails = timelinePricing[timeline];
      if (timelineDetails.multiplier > 1) {
        const preTimelineTotal = total;
        total *= timelineDetails.multiplier;
        breakdownItems.push({ label: `${timelineDetails.label} delivery uplift`, cost: total - preTimelineTotal });
      }

      estimateTotal.textContent = formatCurrency(total);
      renderBreakdown(breakdownItems);
      return Math.round(total);
    }

    function renderBreakdown(items) {
      estimateBreakdown.innerHTML = '';
      items.forEach((item) => {
        const row = document.createElement('div');
        row.className = 'flex items-center justify-between px-4 py-3 rounded-2xl glass-surface text-sm text-slate-200';
        row.innerHTML = `<span>${item.label}</span><span class="font-semibold text-cyan-300">${formatCurrency(item.cost)}</span>`;
        estimateBreakdown.appendChild(row);
      });
    }

    // --- Modal/Toast UI Functions ---
    function toggleToast(toastElement, show) {
      toastElement.classList.toggle('hidden', !show);
      toastElement.classList.toggle('opacity-0', !show);
      if (show) {
        setTimeout(() => toggleToast(toastElement, false), 5200);
      }
    }

    function showStep(step) {
      const totalSteps = stepPanels.length;
      currentStep = Math.max(1, Math.min(step, totalSteps));
      stepPanels.forEach((panel, index) => {
        panel.classList.toggle('active', index === currentStep - 1);
      });
      stepDots.forEach((dot, index) => {
        dot.classList.toggle('active', index <= currentStep - 1);
      });
      stepLabels.forEach((label, index) => {
        label.classList.toggle('text-cyan-200', index === currentStep - 1);
        label.classList.toggle('text-slate-400', index !== currentStep - 1);
      });

      const atStart = currentStep === 1;
      const atEnd = currentStep === stepPanels.length;
      prevStepButton.disabled = atStart;
      prevStepButton.classList.toggle('opacity-40', atStart);
      nextStepButton.classList.toggle('hidden', atEnd);
      submitButton.classList.toggle('hidden', !atEnd);
    }

    function resetFormState() {
      form.reset();
      selectedProjectType = 'marketing';
      backendRequirement = 'no';
      const defaultProjectButton = projectTypeButtons.find((btn) => btn.dataset.projectType === selectedProjectType);
      const defaultBackendButton = backendButtons.find((btn) => btn.dataset.backend === backendRequirement);
      highlightSelection(projectTypeButtons, defaultProjectButton);
      highlightSelection(backendButtons, defaultBackendButton);
      pagesRange.value = '3';
      pagesOutput.textContent = '3 pages';
      updateEstimate();
      showStep(1);
    }

    function openModal() {
      resetFormState();
      quoteModal.classList.remove('hidden');
      requestAnimationFrame(() => quoteModal.classList.add('active'));
      body.classList.add('modal-open');
      quoteModal.setAttribute('aria-hidden', 'false');
    }

    function closeModal() {
      quoteModal.classList.remove('active');
      body.classList.remove('modal-open');
      quoteModal.setAttribute('aria-hidden', 'true');
      setTimeout(() => {
        if (!quoteModal.classList.contains('active')) {
          quoteModal.classList.add('hidden');
        }
      }, 220);
    }

    // --- Modal Event Handlers ---
    openQuoteButtons.forEach((button) => {
      button.addEventListener('click', openModal);
    });

    closeModalButtons.forEach((button) => {
      button.addEventListener('click', closeModal);
    });

    quoteModal.addEventListener('click', (event) => {
      if (event.target === quoteModal) {
        closeModal();
      }
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && quoteModal.classList.contains('active')) {
        closeModal();
      }
    });

    nextStepButton.addEventListener('click', () => {
      showStep(currentStep + 1);
      updateEstimate();
    });

    prevStepButton.addEventListener('click', () => {
      if (currentStep > 1) {
        showStep(currentStep - 1);
      }
    });

    // --- Form Submission (Firestore) ---
    async function handleSubmit(event) {
      event.preventDefault();
      submitButton.disabled = true;
      submitButton.classList.add('opacity-60');

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const projectName = document.getElementById('project-name').value.trim();
      const projectDescription = document.getElementById('project-description').value.trim();
      const projectUrl = document.getElementById('project-url').value.trim();
      const urlStatus = document.getElementById('url-status').value;
      const logoStatus = document.getElementById('logo-status').value;
      const timeline = document.getElementById('timeline').value;
      const pages = Number(pagesRange.value);
      const designTone = document.getElementById('design-tone').value;
      const interactionLevel = document.getElementById('interaction-level').value;

      const finalEstimate = updateEstimate();
      const now = new Date();

      const data = {
        name,
        email,
        phone,
        projectName,
        projectDescription,
        projectType: pricingMatrix[selectedProjectType].label,
        projectTypeKey: selectedProjectType,
        pages,
        backend: backendRequirement,
        timeline,
        timelineLabel: timelinePricing[timeline].label,
        urlStatus,
        projectUrl: projectUrl || 'N/A',
        logoStatus,
        designTone,
        interactionLevel,
        finalEstimate,
        timestamp: now.toISOString(),
        humanTimestamp: now.toLocaleString(),
        userId: crypto.randomUUID(),
        'feature-ecommerce': document.getElementById('feature-ecommerce').checked ? 'on' : 'off',
        'feature-admin': document.getElementById('feature-admin').checked ? 'on' : 'off',
        'feature-support': document.getElementById('feature-support').checked ? 'on' : 'off',
        'feature-automation': document.getElementById('feature-automation').checked ? 'on' : 'off',
      };

      try {
        // Use a generic 'quotes' collection for this example
        await addDoc(collection(db, 'quotes'), data);
        toggleToast(errorToast, false);
        toggleToast(successToast, true);
        closeModal();
        resetFormState();
      } catch (error) {
        console.error('Error saving quote:', error);
        toggleToast(successToast, false);
        toggleToast(errorToast, true);
      } finally {
        submitButton.disabled = false;
        submitButton.classList.remove('opacity-60');
      }
    }

    form.addEventListener('submit', handleSubmit);

    resetFormState();

    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }

    // --- Secret Admin Code Logic ---
    const adminCode = 'admin';
    let typedKeys = '';
    const adminUrl = '/admin';

    document.addEventListener('keydown', (event) => {
        // Get the key, forcing lowercase for case-insensitivity
        const key = event.key.toLowerCase();

        // Check if the key is a single letter (a-z)
        if (key.length === 1 && key >= 'a' && key <= 'z') {
            typedKeys += key;
        } else {
            // Reset sequence if a non-letter key (like Space, Enter, Shift, etc.) is pressed
            typedKeys = '';
        }

        // Keep only the last 5 characters to check against 'admin'
        if (typedKeys.length > adminCode.length) {
            typedKeys = typedKeys.substring(typedKeys.length - adminCode.length);
        }

        if (typedKeys === adminCode) {
            console.log(`Admin code '${adminCode}' entered. Redirecting to ${adminUrl}`);
            // Redirect to /admin
            window.location.href = adminUrl;
            // Reset the key sequence after success
            typedKeys = '';
        }
    });

  </script>
</body>
</html>
