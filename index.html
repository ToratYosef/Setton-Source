<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setton Source | Instant Quote</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300..800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    :root {
      color-scheme: dark;
    }
    body {
      font-family: "Manrope", system-ui, sans-serif;
      background: radial-gradient(circle at top left, rgba(0,210,255,0.25), transparent 45%),
                  radial-gradient(circle at bottom right, rgba(120,57,255,0.3), transparent 40%),
                  #030712;
      color: #f9fafb;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    .noise-overlay {
      pointer-events: none;
      position: fixed;
      inset: 0;
      background-image: url('https://grainy-gradients.vercel.app/noise.svg');
      opacity: 0.05;
      mix-blend-mode: screen;
    }
    .glass-card {
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      background: linear-gradient(135deg, rgba(15,23,42,0.78), rgba(15,23,42,0.55));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 25px 60px rgba(2,8,23,0.55);
    }
    .glass-surface {
      backdrop-filter: blur(30px);
      -webkit-backdrop-filter: blur(30px);
      background: rgba(15,23,42,0.65);
      border: 1px solid rgba(255,255,255,0.05);
    }
    .focus-ring:focus-visible {
      outline: 2px solid rgba(0,210,255,0.45);
      outline-offset: 2px;
    }
    .aurora {
      position: absolute;
      inset: -30% -20% auto -20%;
      height: 60vh;
      background: radial-gradient(circle, rgba(0,210,255,0.45) 0%, rgba(0,210,255,0) 65%);
      filter: blur(80px);
      opacity: 0.6;
      animation: pulse 12s ease-in-out infinite;
    }
    .aurora-second {
      position: absolute;
      inset: auto -15% -30% 40%;
      height: 55vh;
      background: radial-gradient(circle, rgba(120,57,255,0.4) 0%, rgba(120,57,255,0) 70%);
      filter: blur(85px);
      opacity: 0.7;
      animation: pulse 16s ease-in-out infinite reverse;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.65; }
      50% { transform: scale(1.08); opacity: 0.85; }
    }
  </style>
</head>
<body class="relative">
  <div class="noise-overlay"></div>
  <div class="aurora"></div>
  <div class="aurora-second"></div>

  <header class="relative z-10">
    <div class="max-w-6xl mx-auto px-6 pt-12 pb-8">
      <div class="flex flex-wrap lg:flex-nowrap items-center gap-10">
        <div class="flex-1 space-y-6">
          <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-surface text-cyan-200/80 text-sm uppercase tracking-[0.3em]">
            <i data-lucide="sparkles" class="w-4 h-4"></i>
            Futuristic web experiences
          </span>
          <h1 class="font-[700] text-4xl md:text-5xl lg:text-6xl leading-tight text-slate-50">
            Get an instant estimate that makes your vision impossible to ignore.
          </h1>
          <p class="text-lg md:text-xl text-slate-300/90 max-w-2xl">
            Answer a few high-impact questions and watch a live quote adapt to your scope. When you submit, your roadmap lands directly in our real-time dashboard for a rapid follow-up.
          </p>
          <div class="flex flex-wrap gap-4 text-sm text-slate-300/80">
            <div class="glass-surface px-4 py-3 rounded-xl flex items-center gap-3">
              <i data-lucide="timer" class="w-5 h-5 text-cyan-300"></i>
              Replies within 12 hours
            </div>
            <div class="glass-surface px-4 py-3 rounded-xl flex items-center gap-3">
              <i data-lucide="rocket" class="w-5 h-5 text-purple-300"></i>
              Launch-ready in 4–6 weeks
            </div>
            <div class="glass-surface px-4 py-3 rounded-xl flex items-center gap-3">
              <i data-lucide="activity" class="w-5 h-5 text-emerald-300"></i>
              Conversion-first strategy
            </div>
          </div>
        </div>
        <div class="w-full max-w-sm mx-auto lg:mx-0 glass-card rounded-3xl p-6 text-slate-200">
          <p class="uppercase text-xs tracking-[0.25em] text-slate-400 mb-4">Top Deliverables</p>
          <ul class="space-y-4">
            <li class="flex items-start gap-3">
              <span class="w-10 h-10 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="layout-dashboard" class="w-5 h-5 text-cyan-300"></i>
              </span>
              <div>
                <p class="font-semibold text-slate-100">Immersive hero systems</p>
                <p class="text-sm text-slate-400">Glassmorphism layers, motion cues, and on-brand art direction.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="w-10 h-10 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="chart-no-axes-combined" class="w-5 h-5 text-purple-300"></i>
              </span>
              <div>
                <p class="font-semibold text-slate-100">High-performance builds</p>
                <p class="text-sm text-slate-400">Next.js, Firebase, automations, and analytics-ready rollouts.</p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="w-10 h-10 rounded-2xl glass-surface flex items-center justify-center">
                <i data-lucide="sparkle" class="w-5 h-5 text-emerald-300"></i>
              </span>
              <div>
                <p class="font-semibold text-slate-100">Conversion architecture</p>
                <p class="text-sm text-slate-400">Frictionless flows, CRO sprints, and launch support baked in.</p>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <main class="relative z-10 pb-24">
    <div class="max-w-6xl mx-auto px-6">
      <div class="grid lg:grid-cols-[1.05fr_0.95fr] gap-10">
        <section class="glass-card rounded-3xl p-8 lg:p-10 shadow-2xl">
          <div class="flex items-center justify-between flex-wrap gap-3 mb-6">
            <h2 class="text-2xl md:text-3xl font-semibold text-slate-50">Project Blueprint</h2>
            <span class="inline-flex items-center gap-2 text-xs uppercase tracking-[0.25em] text-slate-400">
              <i data-lucide="cpu" class="w-4 h-4"></i>
              Powered by Firebase
            </span>
          </div>
          <form id="quote-form" class="space-y-10">
            <div class="grid md:grid-cols-2 gap-6">
              <label class="space-y-2 text-sm">
                <span class="uppercase tracking-[0.3em] text-slate-400">Your Name</span>
                <input type="text" id="name" name="name" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="Jordan Founder" />
              </label>
              <label class="space-y-2 text-sm">
                <span class="uppercase tracking-[0.3em] text-slate-400">Email</span>
                <input type="email" id="email" name="email" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="you@brand.com" />
              </label>
              <label class="space-y-2 text-sm">
                <span class="uppercase tracking-[0.3em] text-slate-400">Phone</span>
                <input type="tel" id="phone" name="phone" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="(555) 123-4567" />
              </label>
              <label class="space-y-2 text-sm">
                <span class="uppercase tracking-[0.3em] text-slate-400">Company / Brand</span>
                <input type="text" id="project-name" name="project-name" required class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="NovaLabs" />
              </label>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
              <div class="space-y-4">
                <label class="space-y-3 block">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Project Type</span>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <button type="button" data-project-type="landing" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                      <i data-lucide="sparkles" class="w-5 h-5 text-cyan-300 mb-3"></i>
                      <p class="font-semibold text-slate-100">Launch Page</p>
                      <p class="text-xs text-slate-400">Single page or microsite momentum.</p>
                    </button>
                    <button type="button" data-project-type="marketing" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                      <i data-lucide="layers" class="w-5 h-5 text-purple-300 mb-3"></i>
                      <p class="font-semibold text-slate-100">Marketing Site</p>
                      <p class="text-xs text-slate-400">Multi-page presence & storytelling.</p>
                    </button>
                    <button type="button" data-project-type="ecommerce" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                      <i data-lucide="shopping-bag" class="w-5 h-5 text-emerald-300 mb-3"></i>
                      <p class="font-semibold text-slate-100">E-commerce</p>
                      <p class="text-xs text-slate-400">Storefronts, subscriptions, funnels.</p>
                    </button>
                    <button type="button" data-project-type="webapp" class="project-type-option glass-surface rounded-2xl px-4 py-4 text-left border border-transparent hover:border-cyan-400/60 transition focus-ring">
                      <i data-lucide="blocks" class="w-5 h-5 text-amber-300 mb-3"></i>
                      <p class="font-semibold text-slate-100">Web App / Portal</p>
                      <p class="text-xs text-slate-400">Dashboards, portals, internal tools.</p>
                    </button>
                  </div>
                </label>

                <div class="grid gap-5 sm:grid-cols-2">
                  <label class="space-y-2 block text-sm">
                    <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Core Pages</span>
                    <input type="range" id="pages" min="1" max="12" step="1" value="3" class="w-full" />
                    <div class="flex justify-between text-xs text-slate-400">
                      <span>1</span><span id="pages-output" class="text-cyan-300 text-sm font-semibold">3 pages</span><span>12</span>
                    </div>
                  </label>
                  <label class="space-y-2 block text-sm">
                    <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Backend & Integrations</span>
                    <div class="grid grid-cols-2 gap-2 text-xs">
                      <button type="button" data-backend="no" class="backend-option glass-surface rounded-xl px-3 py-3 border border-transparent hover:border-cyan-400/60 transition focus-ring">No</button>
                      <button type="button" data-backend="yes" class="backend-option glass-surface rounded-xl px-3 py-3 border border-transparent hover:border-cyan-400/60 transition focus-ring">Yes</button>
                    </div>
                    <p class="text-xs text-slate-500">APIs, auth, dashboards, automations.</p>
                  </label>
                </div>
              </div>

              <div class="space-y-6">
                <fieldset class="space-y-3">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Key Features</span>
                  <div class="grid sm:grid-cols-2 gap-3 text-sm">
                    <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                      <input type="checkbox" id="feature-ecommerce" class="mt-1 accent-cyan-400" />
                      <div>
                        <p class="font-semibold text-slate-100">Payments / Storefront</p>
                        <p class="text-xs text-slate-400">Shop, donations, booking flow.</p>
                      </div>
                    </label>
                    <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                      <input type="checkbox" id="feature-admin" class="mt-1 accent-purple-400" />
                      <div>
                        <p class="font-semibold text-slate-100">Admin / CMS</p>
                        <p class="text-xs text-slate-400">Manageable content, data tools.</p>
                      </div>
                    </label>
                    <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                      <input type="checkbox" id="feature-support" class="mt-1 accent-emerald-400" />
                      <div>
                        <p class="font-semibold text-slate-100">Live Support</p>
                        <p class="text-xs text-slate-400">Chat, support desk, knowledge base.</p>
                      </div>
                    </label>
                    <label class="glass-surface rounded-2xl p-4 flex items-start gap-3 cursor-pointer transition hover:border-cyan-400/50 border border-transparent">
                      <input type="checkbox" id="feature-automation" class="mt-1 accent-amber-300" />
                      <div>
                        <p class="font-semibold text-slate-100">Automation</p>
                        <p class="text-xs text-slate-400">Workflows, CRM, analytics boosts.</p>
                      </div>
                    </label>
                  </div>
                </fieldset>

                <div class="space-y-4">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400 block">Brand & Assets</span>
                  <label class="glass-surface rounded-2xl p-4 flex items-center justify-between text-sm cursor-pointer border border-transparent hover:border-cyan-400/50 transition">
                    <div>
                      <p class="font-semibold text-slate-100">Logo ready to use?</p>
                      <p class="text-xs text-slate-400">If not, we include a rapid brand refresh (+$180).</p>
                    </div>
                    <select id="logo-status" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                      <option value="yes">Yes, ready</option>
                      <option value="no">Need help</option>
                    </select>
                  </label>
                  <label class="glass-surface rounded-2xl p-4 flex items-center justify-between text-sm cursor-pointer border border-transparent hover:border-cyan-400/50 transition">
                    <div>
                      <p class="font-semibold text-slate-100">Do you already own a URL?</p>
                      <p class="text-xs text-slate-400">If not, we secure domains + hosting setup.</p>
                    </div>
                    <select id="url-status" class="glass-surface rounded-xl px-3 py-2 focus-ring">
                      <option value="live">I have one</option>
                      <option value="buy">Need to purchase</option>
                    </select>
                  </label>
                  <label class="glass-surface rounded-2xl p-4 flex flex-col gap-3 text-sm border border-transparent hover:border-cyan-400/50 transition">
                    <p class="font-semibold text-slate-100">Link to current site or inspiration (optional)</p>
                    <input type="url" id="project-url" placeholder="https://" class="glass-surface rounded-xl px-3 py-2 focus-ring placeholder:text-slate-500" />
                  </label>
                </div>

                <label class="space-y-3 block">
                  <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Timeline</span>
                  <select id="timeline" class="glass-surface rounded-2xl px-4 py-3 focus-ring">
                    <option value="standard">Standard (4-6 weeks)</option>
                    <option value="accelerated">Accelerated (2-3 weeks)</option>
                    <option value="rapid">Rapid Sprint (10 days)</option>
                  </select>
                </label>
              </div>
            </div>

            <label class="space-y-3 block text-sm">
              <span class="uppercase tracking-[0.3em] text-xs text-slate-400">Project Narrative</span>
              <textarea id="project-description" rows="5" class="focus-ring w-full px-4 py-3 rounded-2xl glass-surface placeholder:text-slate-500" placeholder="Tell us about the product, target audience, features, and success metrics."></textarea>
            </label>

            <button type="submit" id="submit-button" class="w-full inline-flex items-center justify-center gap-3 rounded-2xl bg-gradient-to-r from-cyan-400 via-purple-400 to-emerald-400 text-slate-900 font-semibold py-4 text-lg shadow-[0_25px_45px_rgba(0,210,255,0.25)] transition hover:brightness-110">
              <i data-lucide="send" class="w-5 h-5"></i>
              Submit Quote Request
            </button>
          </form>
        </section>

        <aside class="space-y-6">
          <div class="glass-card rounded-3xl p-8 lg:sticky lg:top-8">
            <div class="flex items-center justify-between mb-6">
              <div>
                <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Projected investment</p>
                <h3 class="text-4xl font-semibold text-slate-50" id="estimate-total">$5,200</h3>
              </div>
              <span class="px-4 py-2 rounded-full glass-surface text-xs text-cyan-200/90 uppercase tracking-[0.3em]">Live</span>
            </div>
            <div id="estimate-pill" class="rounded-2xl glass-surface p-5 text-sm space-y-2">
              <p class="text-slate-300">This includes design, development, QA, launch support, and the selected feature stack.</p>
            </div>
            <div class="space-y-4" id="estimate-breakdown"></div>
            <div class="pt-6 mt-6 border-t border-white/10 space-y-3 text-sm text-slate-300">
              <p class="flex items-center gap-2"><i data-lucide="zap" class="w-4 h-4 text-cyan-300"></i> Real humans reviewing every request.</p>
              <p class="flex items-center gap-2"><i data-lucide="shield-check" class="w-4 h-4 text-emerald-300"></i> Securely stored in Firebase and synced to our admin command center.</p>
              <p class="flex items-center gap-2"><i data-lucide="clock-4" class="w-4 h-4 text-purple-300"></i> Follow-up call slots delivered instantly.</p>
            </div>
          </div>

          <div class="glass-card rounded-3xl p-8 space-y-4">
            <h3 class="text-xl font-semibold text-slate-100">Why teams choose Setton Source</h3>
            <p class="text-sm text-slate-400">Founders, schools, and nonprofits lean on our fusion of cinematic design and dependable engineering to ship launches that convert.</p>
            <ul class="space-y-3 text-sm text-slate-300">
              <li class="flex gap-3"><i data-lucide="diamond" class="w-4 h-4 text-cyan-300 mt-1"></i> Glassmorphism visuals with meticulous motion design.</li>
              <li class="flex gap-3"><i data-lucide="git-branch" class="w-4 h-4 text-purple-300 mt-1"></i> Full-stack builds powered by Next.js, Firebase, and automation.</li>
              <li class="flex gap-3"><i data-lucide="gauge" class="w-4 h-4 text-emerald-300 mt-1"></i> Launch analytics, CRO experiments, and growth retainers baked in.</li>
            </ul>
            <a href="admin/index.html" class="inline-flex items-center gap-2 text-sm text-cyan-300 hover:text-cyan-200 transition">
              Access admin dashboard
              <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <footer class="relative z-10 border-t border-white/5">
    <div class="max-w-6xl mx-auto px-6 py-10 flex flex-col md:flex-row gap-4 items-center justify-between text-xs text-slate-500">
      <p>&copy; 2025 Setton Source. Crafted in NYC.</p>
      <div class="flex gap-4">
        <span>hello@settonsource.com</span>
        <span class="hidden md:inline">|</span>
        <span>Instagram · LinkedIn · Behance</span>
      </div>
    </div>
  </footer>

  <div id="success-toast" class="fixed bottom-8 right-6 max-w-sm glass-card rounded-2xl p-5 shadow-2xl border border-emerald-400/40 text-emerald-200 hidden">
    <div class="flex items-start gap-3">
      <span class="w-10 h-10 rounded-xl bg-emerald-400/20 flex items-center justify-center">
        <i data-lucide="check" class="w-5 h-5"></i>
      </span>
      <div>
        <p class="font-semibold text-slate-50">Quote captured!</p>
        <p class="text-sm text-emerald-100/90">We just synced your request to our admin dashboard. Expect a personal reply shortly.</p>
      </div>
    </div>
  </div>

  <div id="error-toast" class="fixed bottom-8 right-6 max-w-sm glass-card rounded-2xl p-5 shadow-2xl border border-red-400/40 text-red-200 hidden">
    <div class="flex items-start gap-3">
      <span class="w-10 h-10 rounded-xl bg-red-400/20 flex items-center justify-center">
        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
      </span>
      <div>
        <p class="font-semibold text-slate-50">Something went wrong</p>
        <p class="text-sm text-red-100/90">Please try again or email hello@settonsource.com so we can assist manually.</p>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCcUMZmKwdOcUj4KszvTkPKlo-HmiVCXZU",
      authDomain: "setton-source-68177.firebaseapp.com",
      projectId: "setton-source-68177",
      storageBucket: "setton-source-68177.firebasestorage.app",
      messagingSenderId: "153708206059",
      appId: "1:153708206059:web:14cc935233eee4ecdb72bae",
      measurementId: "G-YW9WN4489T"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const pricingMatrix = {
      landing: { label: "Launch Page", base: 850, includedPages: 1, perPage: 280 },
      marketing: { label: "Marketing Site", base: 1600, includedPages: 3, perPage: 320 },
      ecommerce: { label: "E-commerce", base: 2400, includedPages: 4, perPage: 420 },
      webapp: { label: "Web App / Portal", base: 3200, includedPages: 4, perPage: 520 },
    };

    const timelinePricing = {
      standard: { label: "Standard", multiplier: 1 },
      accelerated: { label: "Accelerated", multiplier: 1.18 },
      rapid: { label: "Rapid Sprint", multiplier: 1.32 },
    };

    const backendCost = 950;
    const featurePricing = {
      "feature-ecommerce": { label: "Payments & commerce", cost: 680 },
      "feature-admin": { label: "Admin / CMS", cost: 520 },
      "feature-support": { label: "Live support suite", cost: 280 },
      "feature-automation": { label: "Automation & CRM", cost: 420 },
    };
    const logoRefreshCost = 180;
    const domainSetupCost = 140;

    const projectTypeButtons = Array.from(document.querySelectorAll('.project-type-option'));
    const backendButtons = Array.from(document.querySelectorAll('.backend-option'));
    const pagesRange = document.getElementById('pages');
    const pagesOutput = document.getElementById('pages-output');
    const estimateTotal = document.getElementById('estimate-total');
    const estimateBreakdown = document.getElementById('estimate-breakdown');
    const form = document.getElementById('quote-form');
    const submitButton = document.getElementById('submit-button');
    const successToast = document.getElementById('success-toast');
    const errorToast = document.getElementById('error-toast');

    let selectedProjectType = 'marketing';
    let backendRequirement = 'no';

    const formatCurrency = (value) => new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      maximumFractionDigits: 0,
    }).format(Math.round(value));

    function highlightSelection(collection, activeButton) {
      collection.forEach((button) => {
        const isActive = button === activeButton;
        button.classList.toggle('border-cyan-400/80', isActive);
        button.classList.toggle('bg-cyan-400/10', isActive);
        button.classList.toggle('shadow-[0_0_25px_rgba(0,210,255,0.35)]', isActive);
      });
    }

    projectTypeButtons.forEach((button) => {
      if (button.dataset.projectType === selectedProjectType) {
        highlightSelection(projectTypeButtons, button);
      }
      button.addEventListener('click', () => {
        selectedProjectType = button.dataset.projectType;
        highlightSelection(projectTypeButtons, button);
        updateEstimate();
      });
    });

    backendButtons.forEach((button) => {
      if (button.dataset.backend === backendRequirement) {
        highlightSelection(backendButtons, button);
      }
      button.addEventListener('click', () => {
        backendRequirement = button.dataset.backend;
        highlightSelection(backendButtons, button);
        updateEstimate();
      });
    });

    pagesRange.addEventListener('input', () => {
      pagesOutput.textContent = `${pagesRange.value} ${pagesRange.value === '1' ? 'page' : 'pages'}`;
      updateEstimate();
    });

    document.querySelectorAll('input[type="checkbox"], select').forEach((input) => {
      input.addEventListener('change', updateEstimate);
    });

    function updateEstimate() {
      const matrix = pricingMatrix[selectedProjectType];
      const pages = Number(pagesRange.value);
      const timeline = document.getElementById('timeline').value;
      const logoStatus = document.getElementById('logo-status').value;
      const urlStatus = document.getElementById('url-status').value;

      let total = matrix.base;
      const breakdownItems = [
        { label: `${matrix.label} base`, cost: matrix.base },
      ];

      const extraPages = Math.max(0, pages - matrix.includedPages);
      if (extraPages > 0) {
        const pageCost = extraPages * matrix.perPage;
        total += pageCost;
        breakdownItems.push({ label: `Additional ${extraPages} page${extraPages > 1 ? 's' : ''}`, cost: pageCost });
      }

      if (backendRequirement === 'yes') {
        total += backendCost;
        breakdownItems.push({ label: 'Backend & integrations', cost: backendCost });
      }

      Object.entries(featurePricing).forEach(([id, details]) => {
        const checkbox = document.getElementById(id);
        if (checkbox.checked) {
          total += details.cost;
          breakdownItems.push({ label: details.label, cost: details.cost });
        }
      });

      if (logoStatus === 'no') {
        total += logoRefreshCost;
        breakdownItems.push({ label: 'Rapid brand refresh', cost: logoRefreshCost });
      }

      if (urlStatus === 'buy') {
        total += domainSetupCost;
        breakdownItems.push({ label: 'Domain & hosting setup', cost: domainSetupCost });
      }

      const timelineDetails = timelinePricing[timeline];
      if (timelineDetails.multiplier > 1) {
        const preTimelineTotal = total;
        total *= timelineDetails.multiplier;
        breakdownItems.push({ label: `${timelineDetails.label} delivery uplift`, cost: total - preTimelineTotal });
      }

      estimateTotal.textContent = formatCurrency(total);
      renderBreakdown(breakdownItems);
      return Math.round(total);
    }

    function renderBreakdown(items) {
      estimateBreakdown.innerHTML = '';
      items.forEach((item) => {
        const row = document.createElement('div');
        row.className = 'flex items-center justify-between px-4 py-3 rounded-2xl glass-surface text-sm text-slate-200';
        row.innerHTML = `<span>${item.label}</span><span class="font-semibold text-cyan-300">${formatCurrency(item.cost)}</span>`;
        estimateBreakdown.appendChild(row);
      });
    }

    function toggleToast(toastElement, show) {
      toastElement.classList.toggle('hidden', !show);
      toastElement.classList.toggle('opacity-0', !show);
      if (show) {
        setTimeout(() => toggleToast(toastElement, false), 5200);
      }
    }

    async function handleSubmit(event) {
      event.preventDefault();
      submitButton.disabled = true;
      submitButton.classList.add('opacity-60');

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const projectName = document.getElementById('project-name').value.trim();
      const projectDescription = document.getElementById('project-description').value.trim();
      const projectUrl = document.getElementById('project-url').value.trim();
      const urlStatus = document.getElementById('url-status').value;
      const logoStatus = document.getElementById('logo-status').value;
      const timeline = document.getElementById('timeline').value;
      const pages = Number(pagesRange.value);

      const finalEstimate = updateEstimate();
      const now = new Date();

      const data = {
        name,
        email,
        phone,
        projectName,
        projectDescription,
        projectType: pricingMatrix[selectedProjectType].label,
        projectTypeKey: selectedProjectType,
        pages,
        backend: backendRequirement,
        timeline,
        timelineLabel: timelinePricing[timeline].label,
        urlStatus,
        projectUrl: projectUrl || 'N/A',
        logoStatus,
        finalEstimate,
        timestamp: now.toISOString(),
        humanTimestamp: now.toLocaleString(),
        userId: crypto.randomUUID(),
        'feature-ecommerce': document.getElementById('feature-ecommerce').checked ? 'on' : 'off',
        'feature-admin': document.getElementById('feature-admin').checked ? 'on' : 'off',
        'feature-support': document.getElementById('feature-support').checked ? 'on' : 'off',
        'feature-automation': document.getElementById('feature-automation').checked ? 'on' : 'off',
      };

      try {
        await addDoc(collection(db, 'quotes'), data);
        form.reset();
        selectedProjectType = 'marketing';
        backendRequirement = 'no';
        highlightSelection(projectTypeButtons, projectTypeButtons.find(btn => btn.dataset.projectType === selectedProjectType));
        highlightSelection(backendButtons, backendButtons.find(btn => btn.dataset.backend === backendRequirement));
        pagesRange.value = '3';
        pagesOutput.textContent = '3 pages';
        updateEstimate();
        toggleToast(errorToast, false);
        toggleToast(successToast, true);
      } catch (error) {
        console.error('Error saving quote:', error);
        toggleToast(successToast, false);
        toggleToast(errorToast, true);
      } finally {
        submitButton.disabled = false;
        submitButton.classList.remove('opacity-60');
      }
    }

    form.addEventListener('submit', handleSubmit);

    updateEstimate();

    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  </script>
</body>
</html>
